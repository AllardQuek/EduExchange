{% extends "questions/layout.html" %}


{% block title %}
Home
{% endblock %}

{% block main %}
    {% include 'common/message.html' %}

    <!-- https://docs.djangoproject.com/en/3.0/topics/forms/ -->
    <!-- https://stackoverflow.com/questions/33763452/applying-css-styles-to-form-items-in-django -->
    <form action="{% url 'submitqn' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        {% for field in form %}
        <div class="form-group">
            {{ field.label_tag }} {{ field }}
        </div>
        {% endfor %}
        <button type="submit" class="btn btn-primary">Submit Question</button>
    </form>

    <hr>
    <i class="fas fa-spinner fa-2x fa-pulse"></i>
    <br><br>


    <h2><strong>All Posts</strong></h2>

    {% for qn in questions %}
    <div class="card mb-3">
        <h3 class="card-header"><a href="{% url 'viewqn' qn.id %}">{{ qn.title }}</a></h3>
        <div class="card-body">
          <h5 class="card-title">{{ qn.content }}</h5>
          <h6 class="card-subtitle text-muted">Asked by: {{ qn.user }} ({{ qn.datetime_created }})</h6>
        </div>
        {% if qn.image %}
        <img class="img-responsive " src="{{ qn.image.url }}" alt="Card image">
        {% endif %}
    </div>
    {% endfor %}

    <!-- https://getbootstrap.com/docs/4.4/components/pagination/#alignment -->
    <div class="pagination justify-content-center">
        <ul class="pagination pagination-sm">
          <!-- Handle previous pages -->
          {% if questions.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page=1">&laquo;</a>
          </li>
          {% else %}
          <li class="page-item disabled">
            <a class="page-link" href="?page=1">&laquo;</a>
          </li>
          {% endif %}

          {% if questions.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page={{ questions.previous_page_number }}">{{ questions.previous_page_number }}</a>
          </li>
          {% endif %}

          <!-- Current page -->
          <li class="page-item active">
            <a class="page-link" href="?page={{ questions.number }}">{{ questions.number }}</a>
          </li>

          <!-- Handle next pages -->
          {% if questions.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ questions.next_page_number }}">{{ questions.next_page_number }}</a>
          </li>
          {% endif %}

          {% if questions.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ questions.paginator.num_pages }}">&raquo;</a>
          </li>
          {% else %}
          <li class="page-item disabled">
            <a class="page-link" href="?page={{ questions.paginator.num_pages }}">&raquo;</a>
          </li> 
          {% endif %}
        </ul>
      </div>
{% endblock %}
